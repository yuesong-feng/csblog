# PostgreSQL pg_trgm

pg_trgm模块提供了函数和运算符，用于确定基于三元组匹配的文本相似度，以及支持快速搜索相似字符串的索引运算符。

这个模块被认为是 "受信任的"，它可以由在当前数据库上有CREATE权限的非超级用户来安装。

## 三元组的概念

三元组是指从一个字符串中抽取的三个连续字符组。我们可以通过计算两个字符串共享的三元组数量从而衡量它们的相似度。这个简单的想法对于测量许多自然语言中的单词的相似度非常有效。

> pg_trgm在从一个字符串中提取三元组时，忽略了非word类型的字符（不由字母和数字组成的字符）。在确定字符串中包含的三元组集合时，每个词都被认为有两个空格前缀和一个空格后缀。例如，字符串`cat`中的三元组是`c`、`ca`、`cat`和`at`。字符串`foo|bar`中的三元组是`f`、`fo`、`foo`、`oo`、`b`、`ba`和`ar`。

## 函数和运算符

pg_trgm模块提供的函数和运算符见下面两个表：

表一：pg_trgm函数：

|函数| 描述
|--|--
|similarity ( text, text ) → real | 返回一个数字表示两个参数的相似程度。结果的范围是0（表示两个字符串完全不相似）到1（表示两个字符串完全相同）。
|show_trgm ( text ) → text[]|返回给定字符串中所有三元组的数组。(实际上除了调试很少有用。)
|word_similarity ( text, text ) → real|返回一个数字，表示第一个字符串中的三元组集与第二个字符串中三元组的有序集中任何连续部分的最大相似度。详情请见下面的解释。
|strict_word_similarity ( text, text ) → real|与word_similarity相同，但强制要求连续部分的边界与单词边界相匹配。由于我们没有跨字三角，这个函数实际上是返回第一个字符串和第二个字符串的任何连续的单词范围之间的最大相似度。

|show_limit () → real|
|set_limit ( real ) → real|
